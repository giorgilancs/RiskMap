<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute scoring rules using spatial cross-validation — score_models • RiskMap</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute scoring rules using spatial cross-validation — score_models"><meta name="description" content="This function calculates the predictive accuracy of a spatial model fitted to a `RiskMap` object using cross-validation.
It allows model scoring based on specified metrics, with options for two cross-validation methods: spatial clustering and regularized subsampling.
Users can choose between continuous ranked probability score (CRPS) and scaled CRPS (SCRPS) as scoring metrics to evaluate predictive quality.
For each data fold, the function can either refit the model or use fixed parameters, enabling flexible model validation and evaluation.
Additionally, it can generate plots of test sets across folds, providing visual insights into the spatial cross-validation structure."><meta property="og:description" content="This function calculates the predictive accuracy of a spatial model fitted to a `RiskMap` object using cross-validation.
It allows model scoring based on specified metrics, with options for two cross-validation methods: spatial clustering and regularized subsampling.
Users can choose between continuous ranked probability score (CRPS) and scaled CRPS (SCRPS) as scoring metrics to evaluate predictive quality.
For each data fold, the function can either refit the model or use fixed parameters, enabling flexible model validation and evaluation.
Additionally, it can generate plots of test sets across folds, providing visual insights into the spatial cross-validation structure."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RiskMap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute scoring rules using spatial cross-validation</h1>

      <div class="d-none name"><code>score_models.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates the predictive accuracy of a spatial model fitted to a `RiskMap` object using cross-validation.
It allows model scoring based on specified metrics, with options for two cross-validation methods: spatial clustering and regularized subsampling.
Users can choose between continuous ranked probability score (CRPS) and scaled CRPS (SCRPS) as scoring metrics to evaluate predictive quality.
For each data fold, the function can either refit the model or use fixed parameters, enabling flexible model validation and evaluation.
Additionally, it can generate plots of test sets across folds, providing visual insights into the spatial cross-validation structure.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">score_models</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  keep_par_fixed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">fold</span>,</span>
<span>  n_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  control_sim <span class="op">=</span> <span class="fu"><a href="set_control_sim.html">set_control_sim</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  min_dist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot_fold <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  messages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  which_metric <span class="op">=</span> <span class="st">"crps"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A `RiskMap` object, output of the `glgpm` function.</p></dd>


<dt id="arg-keep-par-fixed">keep_par_fixed<a class="anchor" aria-label="anchor" href="#arg-keep-par-fixed"></a></dt>
<dd><p>Logical; if `TRUE`, parameters are kept fixed, otherwise the model is re-estimated for each fold.</p></dd>


<dt id="arg-fold">fold<a class="anchor" aria-label="anchor" href="#arg-fold"></a></dt>
<dd><p>Integer; number of folds for cross-validation.</p></dd>


<dt id="arg-n-size">n_size<a class="anchor" aria-label="anchor" href="#arg-n-size"></a></dt>
<dd><p>Optional; the size of the test set, required if `method = "regularized"`.</p></dd>


<dt id="arg-control-sim">control_sim<a class="anchor" aria-label="anchor" href="#arg-control-sim"></a></dt>
<dd><p>Control settings for simulation as output from `set_control_sim`.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character; either `"cluster"` or `"regularized"` for the cross-validation method. The `"cluster"` method uses
the spatial clustering as implented by <code>spatial_clustering_cv</code> functoin from the `spatialEco` package; the `"regularized"` method
select a subsample of the data-set by imposing a minimum distance - as set in the argument `min_dist` - for a randomly selected
subset of locations.</p></dd>


<dt id="arg-min-dist">min_dist<a class="anchor" aria-label="anchor" href="#arg-min-dist"></a></dt>
<dd><p>Optional; minimum distance for regularized subsampling, required if `method = "regularized"`.</p></dd>


<dt id="arg-plot-fold">plot_fold<a class="anchor" aria-label="anchor" href="#arg-plot-fold"></a></dt>
<dd><p>Logical; if `TRUE`, plots each fold's test set.</p></dd>


<dt id="arg-messages">messages<a class="anchor" aria-label="anchor" href="#arg-messages"></a></dt>
<dd><p>Logical; if `TRUE`, displays progress messages.</p></dd>


<dt id="arg-which-metric">which_metric<a class="anchor" aria-label="anchor" href="#arg-which-metric"></a></dt>
<dd><p>Character; either `"crps"` or `"scrps"` to specify scoring rule.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to clustering or subsampling functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class `RiskMap.spatial.cv`, containing:
  - `crps` or `scrps`: Computed scores for each fold.
  - `refit`: A list of re-fitted models for each fold.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>spatial_clustering_cv</code>, <code>subsample.distance</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Emanuele Giorgi <a href="mailto:e.giorgi@lancaster.ac.uk">e.giorgi@lancaster.ac.uk</a></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emanuele Giorgi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

