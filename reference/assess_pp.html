<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Assess Predictive Performance via Spatial Cross-Validation — assess_pp • RiskMap</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assess Predictive Performance via Spatial Cross-Validation — assess_pp"><meta name="description" content="This function evaluates the predictive performance of spatial models fitted to `RiskMap` objects using cross-validation. It supports two classes of diagnostic tools:
- **Scoring rules**, including the Continuous Ranked Probability Score (CRPS) and its scaled version (SCRPS), which quantify the sharpness and calibration of probabilistic forecasts;
- **Calibration diagnostics**, based on the Probability Integral Transform (PIT) for Gaussian outcomes and Aggregated nonparametric PIT (AnPIT) curves for discrete outcomes (e.g., Poisson or Binomial).
Cross-validation can be performed using either spatial clustering or regularized subsampling with a minimum inter-point distance. For each fold or subset, models can be refitted or evaluated with fixed parameters, offering flexibility in model validation. The function also provides visualizations of the spatial distribution of test folds."><meta property="og:description" content="This function evaluates the predictive performance of spatial models fitted to `RiskMap` objects using cross-validation. It supports two classes of diagnostic tools:
- **Scoring rules**, including the Continuous Ranked Probability Score (CRPS) and its scaled version (SCRPS), which quantify the sharpness and calibration of probabilistic forecasts;
- **Calibration diagnostics**, based on the Probability Integral Transform (PIT) for Gaussian outcomes and Aggregated nonparametric PIT (AnPIT) curves for discrete outcomes (e.g., Poisson or Binomial).
Cross-validation can be performed using either spatial clustering or regularized subsampling with a minimum inter-point distance. For each fold or subset, models can be refitted or evaluated with fixed parameters, offering flexibility in model validation. The function also provides visualizations of the spatial distribution of test folds."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RiskMap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Assess Predictive Performance via Spatial Cross-Validation</h1>

      <div class="d-none name"><code>assess_pp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function evaluates the predictive performance of spatial models fitted to `RiskMap` objects using cross-validation. It supports two classes of diagnostic tools:</p>
<p>- **Scoring rules**, including the Continuous Ranked Probability Score (CRPS) and its scaled version (SCRPS), which quantify the sharpness and calibration of probabilistic forecasts;
- **Calibration diagnostics**, based on the Probability Integral Transform (PIT) for Gaussian outcomes and Aggregated nonparametric PIT (AnPIT) curves for discrete outcomes (e.g., Poisson or Binomial).</p>
<p>Cross-validation can be performed using either spatial clustering or regularized subsampling with a minimum inter-point distance. For each fold or subset, models can be refitted or evaluated with fixed parameters, offering flexibility in model validation. The function also provides visualizations of the spatial distribution of test folds.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">assess_pp</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  keep_par_fixed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  fold <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  control_sim <span class="op">=</span> <span class="fu"><a href="set_control_sim.html">set_control_sim</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  min_dist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot_fold <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  messages <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  which_metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AnPIT"</span>, <span class="st">"CRPS"</span>, <span class="st">"SCRPS"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A list of `RiskMap` objects, each representing a model fitted with `glgpm`.</p></dd>


<dt id="arg-keep-par-fixed">keep_par_fixed<a class="anchor" aria-label="anchor" href="#arg-keep-par-fixed"></a></dt>
<dd><p>Logical; if `TRUE`, parameters are kept fixed across folds, otherwise the model is re-estimated for each fold.</p></dd>


<dt id="arg-iter">iter<a class="anchor" aria-label="anchor" href="#arg-iter"></a></dt>
<dd><p>Integer; number of times to repeat the cross-validation.</p></dd>


<dt id="arg-fold">fold<a class="anchor" aria-label="anchor" href="#arg-fold"></a></dt>
<dd><p>Integer; number of folds for cross-validation (required if `method = "cluster"`).</p></dd>


<dt id="arg-n-size">n_size<a class="anchor" aria-label="anchor" href="#arg-n-size"></a></dt>
<dd><p>Optional; the size of the test set, required if `method = "regularized"`.</p></dd>


<dt id="arg-control-sim">control_sim<a class="anchor" aria-label="anchor" href="#arg-control-sim"></a></dt>
<dd><p>Control settings for simulation, an output from `set_control_sim`.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character; either `"cluster"` or `"regularized"` for the cross-validation method. The `"cluster"` method uses
spatial clustering as implemented by the <code>spatial_clustering_cv</code> function from the `spatialEco` package, while the `"regularized"` method
selects a subsample of the dataset by imposing a minimum distance, set by the `min_dist` argument, for a randomly selected
subset of locations.</p></dd>


<dt id="arg-min-dist">min_dist<a class="anchor" aria-label="anchor" href="#arg-min-dist"></a></dt>
<dd><p>Optional; minimum distance for regularized subsampling (required if `method = "regularized"`).</p></dd>


<dt id="arg-plot-fold">plot_fold<a class="anchor" aria-label="anchor" href="#arg-plot-fold"></a></dt>
<dd><p>Logical; if `TRUE`, plots each fold's test set.</p></dd>


<dt id="arg-messages">messages<a class="anchor" aria-label="anchor" href="#arg-messages"></a></dt>
<dd><p>Logical; if `TRUE`, displays progress messages.</p></dd>


<dt id="arg-which-metric">which_metric<a class="anchor" aria-label="anchor" href="#arg-which-metric"></a></dt>
<dd><p>Character vector; one or more of `"CRPS"`, `"SCRPS"`, or `"AnPIT"`, to specify the predictive performance metrics to compute.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to clustering or subsampling functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class `RiskMap.spatial.cv`, containing:</p><dl><dt>test_set</dt>
<dd><p>A list of test sets used for validation, each of class `'sf'`.</p></dd>

  <dt>model</dt>
<dd><p>A named list, one per model, each containing:</p><dl><dt>score</dt>
<dd><p>A list with CRPS and/or SCRPS scores for each fold if requested.</p></dd>

      <dt>PIT</dt>
<dd><p>(if `family = "gaussian"` and `which_metric` includes `"AnPIT"`) A list of PIT values for test data.</p></dd>

      <dt>AnPIT</dt>
<dd><p>(if `family` is discrete and `which_metric` includes `"AnPIT"`) A list of AnPIT curves for test data.</p></dd>


</dl><p></p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Bolin, D., &amp; Wallin, J. (2023). Local scale invariance and robustness of proper scoring rules. *Statistical Science*, 38(1), 140–159. <a href="https://doi.org/10.1214/22-STS864" class="external-link">doi:10.1214/22-STS864</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>spatial_clustering_cv</code>, <code>subsample.distance</code>, <code><a href="plot_AnPIT.html">plot_AnPIT</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Emanuele Giorgi</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emanuele Giorgi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

